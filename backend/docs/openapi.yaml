openapi: 3.1.0
info:
  title: 스텝업(Step-Up) API
  version: 1.0.0
  description: |
    맞춤형 취업 로드맵 설계 서비스 '스텝업(Step-Up)' REST API 명세서
    
    ## 개요
    사용자의 현재 스펙을 분석하고, 실제 채용 공고 기반의 맞춤형 목표를 설정하여,
    달성을 위한 구체적인 로드맵을 제공하는 취업 준비 관리 서비스입니다.
    
    ## 인증
    간단한 구현을 위해 JWT 토큰 대신 `x-user-id` 헤더를 사용합니다.
    모든 API 요청 시 `x-user-id` 헤더에 사용자 ID를 포함해야 합니다.
    
  contact:
    name: Step-Up API Support
    email: support@stepup.com

servers:
  - url: http://localhost:8000
    description: 로컬 개발 서버

tags:
  - name: 인증
    description: 회원가입 및 로그인 관련 API
  - name: 사용자
    description: 사용자 정보 관리
  - name: 스펙
    description: 사용자 스펙 정보 관리 (학력, 어학, 자격증, 프로젝트, 활동)
  - name: 목표
    description: 채용 공고 기반 목표 설정 및 관리
  - name: 로드맵
    description: 업무(Task) 관리 및 진행도 추적

paths:
  # ========================================
  # 인증 API
  # ========================================
  
  /auth/register:
    post:
      tags: [인증]
      summary: 회원가입
      description: 새로운 사용자 계정을 생성합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - password
                - email
              properties:
                user_id:
                  type: string
                  description: 사용자 아이디
                  example: "kim_frontend"
                password:
                  type: string
                  format: password
                  description: 비밀번호 (영문, 숫자, 특수문자 포함 8자 이상)
                  example: "Password123!"
                email:
                  type: string
                  format: email
                  description: 이메일 주소
                  example: "kim@example.com"
      responses:
        '201':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "회원가입이 완료되었습니다"
                  user_id:
                    type: string
                    example: "kim_frontend"
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          description: 중복된 아이디 또는 이메일
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags: [인증]
      summary: 로그인
      description: 아이디와 비밀번호로 로그인합니다.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - password
              properties:
                user_id:
                  type: string
                  example: "kim_frontend"
                password:
                  type: string
                  format: password
                  example: "Password123!"
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "로그인 성공"
                  user_id:
                    type: string
                    example: "kim_frontend"
                  onboarding_completed:
                    type: boolean
                    description: 온보딩 완료 여부
                    example: true
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ========================================
  # 사용자 API
  # ========================================
  
  /users/me:
    get:
      tags: [사용자]
      summary: 내 정보 조회
      description: 현재 로그인한 사용자의 기본 정보를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ========================================
  # 스펙 - 사용자 스펙 정보
  # ========================================
  
  /specs:
    get:
      tags: [스펙]
      summary: 사용자 스펙 정보 조회
      description: 사용자의 기본 스펙 정보(희망 직무, 자기소개 등)를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSpec'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    put:
      tags: [스펙]
      summary: 사용자 스펙 정보 수정
      description: 사용자의 기본 스펙 정보를 수정합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                job_field:
                  type: string
                  description: 희망 직무 분야
                  example: "프론트엔드 개발"
                introduction:
                  type: string
                  description: 자기소개
                  example: "웹 개발에 관심이 많은 컴퓨터공학과 3학년 학생입니다."
                onboarding_completed:
                  type: boolean
                  description: 온보딩 완료 여부
                  example: true
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserSpec'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ========================================
  # 스펙 - 학력
  # ========================================
  
  /specs/education:
    get:
      tags: [스펙]
      summary: 학력 정보 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Education'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    put:
      tags: [스펙]
      summary: 학력 정보 수정
      description: 사용자의 학력 정보를 수정합니다. (1:1 관계)
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                school:
                  type: string
                  example: "한국대학교"
                major:
                  type: string
                  example: "컴퓨터공학과"
                gpa:
                  type: string
                  example: "3.8/4.5"
                graduation_status:
                  type: string
                  enum: [graduated, expected, enrolled]
                  example: "enrolled"
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Education'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ========================================
  # 스펙 - 어학
  # ========================================
  
  /specs/languages:
    get:
      tags: [스펙]
      summary: 어학 성적 목록 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Language'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [스펙]
      summary: 어학 성적 추가
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - language_type
                - score
              properties:
                language_type:
                  type: string
                  description: 어학 종류
                  example: "TOEIC"
                score:
                  type: string
                  description: 점수
                  example: "850"
                acquisition_date:
                  type: string
                  format: date
                  example: "2023-03-15"
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Language'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /specs/languages/{id}:
    delete:
      tags: [스펙]
      summary: 어학 성적 삭제
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 어학 성적 ID
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ========================================
  # 스펙 - 자격증
  # ========================================
  
  /specs/certificates:
    get:
      tags: [스펙]
      summary: 자격증 목록 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Certificate'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [스펙]
      summary: 자격증 추가
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - certificate_name
              properties:
                certificate_name:
                  type: string
                  example: "정보처리기사"
                acquisition_date:
                  type: string
                  format: date
                  example: "2023-08-10"
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Certificate'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /specs/certificates/{id}:
    delete:
      tags: [스펙]
      summary: 자격증 삭제
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 자격증 ID
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ========================================
  # 스펙 - 프로젝트
  # ========================================
  
  /specs/projects:
    get:
      tags: [스펙]
      summary: 프로젝트 목록 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Project'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [스펙]
      summary: 프로젝트 추가
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - project_name
              properties:
                project_name:
                  type: string
                  example: "대학생 커뮤니티 플랫폼"
                role:
                  type: string
                  example: "프론트엔드 개발"
                period:
                  type: string
                  example: "2023.03 - 2023.08"
                description:
                  type: string
                  example: "학생들을 위한 정보 공유 및 소통 플랫폼 개발"
                tech_stack:
                  type: string
                  example: "React, TypeScript, Redux"
                github_url:
                  type: string
                  example: "https://github.com/user/project"
                portfolio_url:
                  type: string
                  example: "https://portfolio.com/project"
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /specs/projects/{id}:
    put:
      tags: [스펙]
      summary: 프로젝트 수정
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 프로젝트 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                project_name:
                  type: string
                role:
                  type: string
                period:
                  type: string
                description:
                  type: string
                tech_stack:
                  type: string
                github_url:
                  type: string
                portfolio_url:
                  type: string
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Project'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags: [스펙]
      summary: 프로젝트 삭제
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 프로젝트 ID
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ========================================
  # 스펙 - 대외활동
  # ========================================
  
  /specs/activities:
    get:
      tags: [스펙]
      summary: 대외활동 목록 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Activity'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [스펙]
      summary: 대외활동 추가
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - activity_name
              properties:
                activity_name:
                  type: string
                  example: "웹 개발 동아리 DEVS"
                activity_type:
                  type: string
                  enum: [인턴, 공모전, 봉사활동, 동아리, 대외활동, 기타]
                  example: "동아리"
                period:
                  type: string
                  example: "2022.03 - 현재"
                description:
                  type: string
                  example: "웹 개발 스터디 및 프로젝트 진행"
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /specs/activities/{id}:
    put:
      tags: [스펙]
      summary: 대외활동 수정
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 대외활동 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                activity_name:
                  type: string
                activity_type:
                  type: string
                period:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags: [스펙]
      summary: 대외활동 삭제
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 대외활동 ID
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  # ========================================
  # 스펙 - 종합 분석
  # ========================================
  
  /specs/dashboard:
    get:
      tags: [스펙]
      summary: 스펙 대시보드 데이터 조회
      description: 사용자의 모든 스펙 정보를 한 번에 조회하여 대시보드에 표시합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_spec:
                    $ref: '#/components/schemas/UserSpec'
                  education:
                    $ref: '#/components/schemas/Education'
                  languages:
                    type: array
                    items:
                      $ref: '#/components/schemas/Language'
                  certificates:
                    type: array
                    items:
                      $ref: '#/components/schemas/Certificate'
                  projects:
                    type: array
                    items:
                      $ref: '#/components/schemas/Project'
                  activities:
                    type: array
                    items:
                      $ref: '#/components/schemas/Activity'
                  stats:
                    type: object
                    description: 통계 정보
                    properties:
                      language_count:
                        type: integer
                        example: 2
                      certificate_count:
                        type: integer
                        example: 2
                      project_count:
                        type: integer
                        example: 2
                      activity_count:
                        type: integer
                        example: 2
                  radar_scores:
                    type: object
                    description: 레이더 차트용 점수 (0-10)
                    properties:
                      education:
                        type: number
                        example: 8
                      language:
                        type: number
                        example: 6
                      certificate:
                        type: number
                        example: 7
                      project:
                        type: number
                        example: 8
                      activity:
                        type: number
                        example: 7
        '401':
          $ref: '#/components/responses/Unauthorized'

  # ========================================
  # 목표 API
  # ========================================
  
  /goals:
    get:
      tags: [목표]
      summary: 현재 목표 조회
      description: 사용자의 현재 활성화된 목표를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 설정된 목표가 없습니다
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      tags: [목표]
      summary: 목표 설정
      description: 새로운 목표를 설정합니다. 기존 목표는 비활성화됩니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - job_title
                - company_name
              properties:
                job_title:
                  type: string
                  example: "프론트엔드 개발자"
                company_name:
                  type: string
                  example: "네이버"
                location:
                  type: string
                  example: "경기 성남시 분당구"
                deadline:
                  type: string
                  format: date
                  example: "2025-12-31"
                experience_level:
                  type: string
                  example: "신입"
                requirements:
                  type: array
                  description: 자격요건 목록
                  items:
                    type: string
                  example: ["HTML, CSS, JavaScript 기본 이해", "React 경험"]
                preferred:
                  type: array
                  description: 우대사항 목록
                  items:
                    type: string
                  example: ["TypeScript 사용 경험", "TOEIC 800점 이상"]
      responses:
        '201':
          description: 목표 설정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    put:
      tags: [목표]
      summary: 목표 수정
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                job_title:
                  type: string
                company_name:
                  type: string
                location:
                  type: string
                deadline:
                  type: string
                  format: date
                experience_level:
                  type: string
                requirements:
                  type: array
                  items:
                    type: string
                preferred:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Goal'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags: [목표]
      summary: 목표 삭제
      description: 현재 목표를 삭제합니다. 연관된 업무의 goal_id는 NULL로 설정됩니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /goals/gap-analysis:
    get:
      tags: [목표]
      summary: 목표와 현재 스펙 격차 분석
      description: 설정한 목표의 요구사항과 사용자의 현재 스펙을 비교 분석합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 분석 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  goal:
                    $ref: '#/components/schemas/Goal'
                  analysis:
                    type: object
                    properties:
                      requirements_met:
                        type: array
                        description: 충족된 요구사항
                        items:
                          type: object
                          properties:
                            requirement:
                              type: string
                              example: "프로젝트 경험 1회 이상"
                            status:
                              type: string
                              enum: [met, partial, not_met]
                              example: "met"
                            user_value:
                              type: string
                              example: "프로젝트 경험 2회"
                      requirements_gap:
                        type: array
                        description: 부족한 요구사항
                        items:
                          type: object
                          properties:
                            requirement:
                              type: string
                              example: "정보처리기사 자격증 보유"
                            status:
                              type: string
                              example: "not_met"
                            user_value:
                              type: string
                              nullable: true
                              example: null
                      preferred_met:
                        type: array
                        description: 충족된 우대사항
                        items:
                          type: object
                      preferred_gap:
                        type: array
                        description: 부족한 우대사항
                        items:
                          type: object
                      suggested_tasks:
                        type: array
                        description: 추천 업무 목록
                        items:
                          type: string
                        example: ["정보처리기사 자격증 취득하기", "TOEIC 850점 달성하기"]
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: 설정된 목표가 없습니다
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ========================================
  # 로드맵 (Tasks) API
  # ========================================
  
  /tasks:
    get:
      tags: [로드맵]
      summary: 업무 목록 조회
      description: 사용자의 모든 업무를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: is_completed
          in: query
          required: false
          schema:
            type: boolean
          description: 완료 여부 필터
        - name: due_date
          in: query
          required: false
          schema:
            type: string
            format: date
          description: 특정 날짜의 업무 조회
        - name: priority
          in: query
          required: false
          schema:
            type: string
            enum: [high, medium, low]
          description: 우선순위 필터
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'
    
    post:
      tags: [로드맵]
      summary: 업무 추가
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
              properties:
                goal_id:
                  type: integer
                  description: 목표 ID (선택)
                  nullable: true
                  example: 1
                title:
                  type: string
                  example: "정보처리기사 자격증 취득하기"
                description:
                  type: string
                  example: "필기 및 실기 시험 준비"
                due_date:
                  type: string
                  format: date
                  example: "2025-06-30"
                priority:
                  type: string
                  enum: [high, medium, low]
                  example: "high"
                order_index:
                  type: integer
                  example: 0
      responses:
        '201':
          description: 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
  
  /tasks/{id}:
    get:
      tags: [로드맵]
      summary: 업무 상세 조회
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 업무 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    put:
      tags: [로드맵]
      summary: 업무 수정
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 업무 ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                title:
                  type: string
                description:
                  type: string
                due_date:
                  type: string
                  format: date
                priority:
                  type: string
                  enum: [high, medium, low]
                order_index:
                  type: integer
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    
    delete:
      tags: [로드맵]
      summary: 업무 삭제
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 업무 ID
      responses:
        '204':
          description: 삭제 성공
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /tasks/{id}/complete:
    patch:
      tags: [로드맵]
      summary: 업무 완료 처리
      description: 업무를 완료 상태로 변경합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 업무 ID
      responses:
        '200':
          description: 완료 처리 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /tasks/{id}/incomplete:
    patch:
      tags: [로드맵]
      summary: 업무 미완료 처리
      description: 업무를 미완료 상태로 되돌립니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 업무 ID
      responses:
        '200':
          description: 미완료 처리 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'

  /tasks/today:
    get:
      tags: [로드맵]
      summary: 오늘의 할 일 조회
      description: 오늘 마감인 미완료 업무를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'

  /roadmap/progress:
    get:
      tags: [로드맵]
      summary: 로드맵 진행도 조회
      description: 전체 업무 진행률 및 통계를 조회합니다.
      parameters:
        - $ref: '#/components/parameters/UserIdHeader'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  goal:
                    $ref: '#/components/schemas/Goal'
                  total_tasks:
                    type: integer
                    description: 전체 업무 수
                    example: 10
                  completed_tasks:
                    type: integer
                    description: 완료된 업무 수
                    example: 6
                  progress_percentage:
                    type: number
                    description: 진행률 (%)
                    example: 60
                  days_remaining:
                    type: integer
                    description: 남은 일수 (목표 마감일까지)
                    nullable: true
                    example: 45
                  today_tasks:
                    type: array
                    description: 오늘의 할 일
                    items:
                      $ref: '#/components/schemas/Task'
        '401':
          $ref: '#/components/responses/Unauthorized'

# ========================================
# Components
# ========================================

components:
  parameters:
    UserIdHeader:
      name: x-user-id
      in: header
      required: true
      schema:
        type: string
      description: 사용자 ID (인증용)
      example: "kim_frontend"

  schemas:
    User:
      type: object
      properties:
        user_id:
          type: string
          example: "kim_frontend"
        email:
          type: string
          format: email
          example: "kim@example.com"
        created_at:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00Z"

    UserSpec:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        job_field:
          type: string
          nullable: true
          example: "프론트엔드 개발"
        introduction:
          type: string
          nullable: true
          example: "웹 개발에 관심이 많은 컴퓨터공학과 3학년 학생입니다."
        onboarding_completed:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Education:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        school:
          type: string
          nullable: true
          example: "한국대학교"
        major:
          type: string
          nullable: true
          example: "컴퓨터공학과"
        gpa:
          type: string
          nullable: true
          example: "3.8/4.5"
        graduation_status:
          type: string
          nullable: true
          enum: [graduated, expected, enrolled]
          example: "enrolled"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Language:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        language_type:
          type: string
          example: "TOEIC"
        score:
          type: string
          example: "850"
        acquisition_date:
          type: string
          format: date
          nullable: true
          example: "2023-03-15"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Certificate:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        certificate_name:
          type: string
          example: "정보처리기사"
        acquisition_date:
          type: string
          format: date
          nullable: true
          example: "2023-08-10"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Project:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        project_name:
          type: string
          example: "대학생 커뮤니티 플랫폼"
        role:
          type: string
          nullable: true
          example: "프론트엔드 개발"
        period:
          type: string
          nullable: true
          example: "2023.03 - 2023.08"
        description:
          type: string
          nullable: true
          example: "학생들을 위한 정보 공유 및 소통 플랫폼 개발"
        tech_stack:
          type: string
          nullable: true
          example: "React, TypeScript, Redux, Socket.io"
        github_url:
          type: string
          nullable: true
          example: "https://github.com/user/project"
        portfolio_url:
          type: string
          nullable: true
          example: "https://portfolio.com/project"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Activity:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        activity_name:
          type: string
          example: "웹 개발 동아리 DEVS"
        activity_type:
          type: string
          nullable: true
          example: "동아리"
        period:
          type: string
          nullable: true
          example: "2022.03 - 현재"
        description:
          type: string
          nullable: true
          example: "웹 개발 스터디 및 프로젝트 진행"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Goal:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        job_title:
          type: string
          example: "프론트엔드 개발자"
        company_name:
          type: string
          example: "네이버"
        location:
          type: string
          nullable: true
          example: "경기 성남시 분당구"
        deadline:
          type: string
          format: date
          nullable: true
          example: "2025-12-31"
        experience_level:
          type: string
          nullable: true
          example: "신입"
        requirements:
          type: array
          description: 자격요건 목록 (JSON)
          items:
            type: string
          example: ["HTML, CSS, JavaScript 기본 이해", "React 또는 Vue.js 프레임워크 경험"]
        preferred:
          type: array
          description: 우대사항 목록 (JSON)
          items:
            type: string
          example: ["TypeScript 사용 경험", "TOEIC 800점 이상"]
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Task:
      type: object
      properties:
        id:
          type: integer
          example: 1
        user_id:
          type: string
          example: "kim_frontend"
        goal_id:
          type: integer
          nullable: true
          example: 1
        title:
          type: string
          example: "정보처리기사 자격증 취득하기"
        description:
          type: string
          nullable: true
          example: "필기 및 실기 시험 준비"
        due_date:
          type: string
          format: date
          nullable: true
          example: "2025-06-30"
        is_completed:
          type: boolean
          example: false
        completed_at:
          type: string
          format: date-time
          nullable: true
          example: null
        priority:
          type: string
          nullable: true
          enum: [high, medium, low]
          example: "high"
        order_index:
          type: integer
          example: 0
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    Error:
      type: object
      properties:
        error:
          type: string
          description: 오류 메시지
          example: "요청 처리 중 오류가 발생했습니다"
        code:
          type: string
          description: 오류 코드
          example: "INVALID_REQUEST"

  responses:
    BadRequest:
      description: 잘못된 요청
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: "필수 필드가 누락되었습니다"
            code: "BAD_REQUEST"

    Unauthorized:
      description: 인증 실패
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: "인증이 필요합니다"
            code: "UNAUTHORIZED"

    NotFound:
      description: 리소스를 찾을 수 없음
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error: "요청한 리소스를 찾을 수 없습니다"
            code: "NOT_FOUND"
