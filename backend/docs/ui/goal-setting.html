<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëª©í‘œ ì„¤ì • - ìŠ¤í…ì—…(Step-Up)</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .goal-setting-content {
            background: var(--bg-light);
            min-height: calc(100vh - 60px);
            padding: 3rem 0;
        }

        .search-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .search-box {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .search-box input {
            flex: 1;
        }

        .job-list {
            display: grid;
            gap: 1rem;
        }

        .job-card {
            background: var(--bg-light);
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .job-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .job-card.selected {
            border-color: var(--primary-color);
            background: rgba(74, 144, 226, 0.1);
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .job-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .company-name {
            color: var(--primary-color);
            font-weight: 500;
        }

        .job-meta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .job-meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .job-requirements {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .requirement-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .requirement-list {
            list-style: none;
            padding: 0;
        }

        .requirement-list li {
            padding: 0.25rem 0;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .requirement-list li::before {
            content: "â€¢ ";
            color: var(--primary-color);
            font-weight: bold;
        }

        .analysis-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .comparison-column h3 {
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--border-color);
        }

        .comparison-item {
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            background: var(--bg-light);
        }

        .comparison-item.match {
            background: #D4EDDA;
            border-left: 4px solid var(--secondary-color);
        }

        .comparison-item.partial {
            background: #FFF3CD;
            border-left: 4px solid var(--warning-color);
        }

        .comparison-item.missing {
            background: #F8D7DA;
            border-left: 4px solid var(--danger-color);
        }

        .status-icon {
            margin-right: 0.5rem;
        }

        .task-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .task-list {
            display: grid;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .task-card {
            background: var(--bg-light);
            padding: 1.5rem;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-info {
            flex: 1;
        }

        .task-title {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .task-description {
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .task-priority {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.85rem;
        }

        .priority-high {
            background: #F8D7DA;
            color: #721C24;
        }

        .priority-medium {
            background: #FFF3CD;
            color: #856404;
        }

        .priority-low {
            background: #D1ECF1;
            color: #0C5460;
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="navbar">
        <div class="container">
            <a href="roadmap.html" class="logo">ğŸ¯ ìŠ¤í…ì—…</a>
            <ul class="nav-links">
                <li><a href="roadmap.html">ë¡œë“œë§µ</a></li>
                <li><a href="dashboard.html">ë‚´ ìŠ¤í™</a></li>
                <li><a href="goal-setting.html">ëª©í‘œ ì„¤ì •</a></li>
                <li><a href="#" onclick="logout(); return false;">ë¡œê·¸ì•„ì›ƒ</a></li>
            </ul>
        </div>
    </nav>

    <!-- í˜ì´ì§€ í—¤ë” -->
    <div class="page-header">
        <div class="container">
            <h1>ëª©í‘œ ì„¤ì •</h1>
            <p>ì›í•˜ëŠ” ì±„ìš© ê³µê³ ë¥¼ ì„ íƒí•˜ê³  ë§ì¶¤í˜• ë¡œë“œë§µì„ ë§Œë“œì„¸ìš”</p>
        </div>
    </div>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <div class="goal-setting-content">
        <div class="container">
            <!-- ì±„ìš© ê³µê³  ê²€ìƒ‰ -->
            <div class="search-section">
                <h2 class="card-title">ì±„ìš© ê³µê³  ê²€ìƒ‰</h2>
                <div class="search-box">
                    <input type="text" id="searchKeyword" class="form-control" placeholder="íšŒì‚¬ëª… ë˜ëŠ” ì§ë¬´ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë„¤ì´ë²„, í”„ë¡ íŠ¸ì—”ë“œ)">
                    <button class="btn btn-primary" onclick="searchJobs()">ê²€ìƒ‰</button>
                </div>

                <div class="job-list" id="jobList">
                    <!-- ìƒ˜í”Œ ì±„ìš© ê³µê³ ë“¤ -->
                </div>
            </div>

            <!-- ìŠ¤í™ ë¹„êµ ë¶„ì„ (ì„ íƒëœ ê²½ìš°ì—ë§Œ í‘œì‹œ) -->
            <div id="analysisSection" class="hidden">
                <div class="analysis-section">
                    <h2 class="card-title">ìŠ¤í™ ë¹„êµ ë¶„ì„</h2>
                    <p style="color: var(--text-light); margin-bottom: 2rem;">
                        ì„ íƒí•œ ê³µê³ ì˜ ìš”êµ¬ì‚¬í•­ê³¼ í˜„ì¬ ìŠ¤í™ì„ ë¹„êµí•œ ê²°ê³¼ì…ë‹ˆë‹¤.
                    </p>
                    
                    <div class="comparison-grid">
                        <div class="comparison-column">
                            <h3>ğŸ“‹ í•„ìš”í•œ ìŠ¤í™</h3>
                            <div id="requiredSpecs"></div>
                        </div>
                        <div class="comparison-column">
                            <h3>âœ… ë‚´ í˜„ì¬ ìŠ¤í™</h3>
                            <div id="mySpecs"></div>
                        </div>
                    </div>
                </div>

                <!-- ì¶”ì²œ ì—…ë¬´ -->
                <div class="task-section">
                    <h2 class="card-title">ì¶”ì²œ ì—…ë¬´ (To-Do List)</h2>
                    <p style="color: var(--text-light); margin-bottom: 1.5rem;">
                        ë¶€ì¡±í•œ ìŠ¤í™ì„ ì±„ìš°ê¸° ìœ„í•œ êµ¬ì²´ì ì¸ ì—…ë¬´ ëª©ë¡ì…ë‹ˆë‹¤.
                    </p>
                    <div class="task-list" id="taskList"></div>
                    
                    <div class="text-center mt-2">
                        <button class="btn btn-secondary" onclick="confirmGoal()">ì´ ëª©í‘œë¡œ ì‹œì‘í•˜ê¸°</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // ìƒ˜í”Œ ì±„ìš© ê³µê³  ë°ì´í„°
        const sampleJobs = [
            {
                id: 1,
                title: 'ì‹ ì… í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì',
                company: 'ë„¤ì´ë²„',
                location: 'ê²½ê¸° ì„±ë‚¨ì‹œ',
                deadline: '2025-11-30',
                experience: 'ì‹ ì…',
                requirements: [
                    'HTML, CSS, JavaScript ê¸°ë³¸ ì´í•´',
                    'React ë˜ëŠ” Vue.js í”„ë ˆì„ì›Œí¬ ê²½í—˜',
                    'ì›¹ ì ‘ê·¼ì„± ë° ì„±ëŠ¥ ìµœì í™”ì— ëŒ€í•œ ì´í•´',
                    'Gitì„ í™œìš©í•œ í˜‘ì—… ê²½í—˜'
                ],
                preferred: [
                    'TypeScript ì‚¬ìš© ê²½í—˜',
                    'ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ ê¸°ì—¬ ê²½í—˜',
                    'TOEIC 800ì  ì´ìƒ',
                    'ì»´í“¨í„° ê´€ë ¨ í•™ìœ„'
                ]
            },
            {
                id: 2,
                title: 'ì£¼ë‹ˆì–´ ë§ˆì¼€í„°',
                company: 'ì¹´ì¹´ì˜¤',
                location: 'ì œì£¼ë„',
                deadline: '2025-12-15',
                experience: 'ê²½ë ¥ 1ë…„',
                requirements: [
                    'ë””ì§€í„¸ ë§ˆì¼€íŒ… ê¸°ë³¸ ì´í•´',
                    'SNS ì±„ë„ ìš´ì˜ ê²½í—˜',
                    'ë°ì´í„° ë¶„ì„ ëŠ¥ë ¥',
                    'ë§ˆì¼€íŒ… ê´€ë ¨ ìê²©ì¦ ë³´ìœ '
                ],
                preferred: [
                    'GAIQ ìê²©ì¦',
                    'ê´‘ê³  ìº í˜ì¸ ê¸°íš ê²½í—˜',
                    'ì˜ì–´ ë˜ëŠ” ì¤‘êµ­ì–´ ê°€ëŠ¥ì',
                    'Adobe Creative Suite í™œìš© ê°€ëŠ¥'
                ]
            },
            {
                id: 3,
                title: 'ì‹ ì… ë°±ì—”ë“œ ê°œë°œì',
                company: 'ì¿ íŒ¡',
                location: 'ì„œìš¸ ì†¡íŒŒêµ¬',
                deadline: '2025-11-20',
                experience: 'ì‹ ì…Â·ê²½ë ¥',
                requirements: [
                    'Java, Python ë“± í•˜ë‚˜ ì´ìƒì˜ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ëŠ¥ìˆ™',
                    'RESTful API ì„¤ê³„ ë° ê°œë°œ ê²½í—˜',
                    'ë°ì´í„°ë² ì´ìŠ¤(MySQL, MongoDB ë“±) ì´í•´',
                    'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬ ìê²©ì¦'
                ],
                preferred: [
                    'Spring Boot ë˜ëŠ” Django í”„ë ˆì„ì›Œí¬ ê²½í—˜',
                    'AWS, GCP ë“± í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ê²½í—˜',
                    'ëŒ€ìš©ëŸ‰ íŠ¸ë˜í”½ ì²˜ë¦¬ ê²½í—˜',
                    'ì»´í“¨í„°ê³µí•™ ì „ê³µ'
                ]
            }
        ];

        let selectedJob = null;
        const userSpec = StorageManager.getSpec();

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒ˜í”Œ ê³µê³  í‘œì‹œ
        displayJobs(sampleJobs);

        function displayJobs(jobs) {
            const jobList = document.getElementById('jobList');
            jobList.innerHTML = jobs.map(job => `
                <div class="job-card" onclick="selectJob(${job.id})">
                    <div class="job-header">
                        <div>
                            <div class="company-name">${job.company}</div>
                            <div class="job-title">${job.title}</div>
                        </div>
                        <span class="badge badge-info">${job.experience}</span>
                    </div>
                    <div class="job-meta">
                        <div class="job-meta-item">ğŸ“ ${job.location}</div>
                        <div class="job-meta-item">ğŸ“… ë§ˆê°: ${job.deadline}</div>
                    </div>
                    <div class="job-requirements">
                        <div class="requirement-title">ìê²©ìš”ê±´</div>
                        <ul class="requirement-list">
                            ${job.requirements.slice(0, 3).map(req => `<li>${req}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function searchJobs() {
            const keyword = document.getElementById('searchKeyword').value.toLowerCase();
            if (!keyword) {
                displayJobs(sampleJobs);
                return;
            }

            const filtered = sampleJobs.filter(job => 
                job.title.toLowerCase().includes(keyword) ||
                job.company.toLowerCase().includes(keyword)
            );

            if (filtered.length === 0) {
                document.getElementById('jobList').innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ”</div>
                        <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                    </div>
                `;
            } else {
                displayJobs(filtered);
            }
        }

        function selectJob(jobId) {
            selectedJob = sampleJobs.find(j => j.id === jobId);
            
            // ì¹´ë“œ ì„ íƒ í‘œì‹œ
            document.querySelectorAll('.job-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');

            // ë¶„ì„ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('analysisSection').classList.remove('hidden');
            
            // ìŠ¤í™ ë¹„êµ ë¶„ì„
            analyzeSpecs(selectedJob);
            
            // ìŠ¤í¬ë¡¤ ì´ë™
            setTimeout(() => {
                document.getElementById('analysisSection').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        function analyzeSpecs(job) {
            const allRequirements = [...job.requirements, ...job.preferred];
            
            // í•„ìš” ìŠ¤í™ í‘œì‹œ
            const requiredSpecs = document.getElementById('requiredSpecs');
            requiredSpecs.innerHTML = allRequirements.map(req => {
                const status = checkRequirement(req);
                return `
                    <div class="comparison-item ${status.class}">
                        <span class="status-icon">${status.icon}</span>
                        ${req}
                    </div>
                `;
            }).join('');

            // ë‚´ ìŠ¤í™ í‘œì‹œ
            const mySpecs = document.getElementById('mySpecs');
            const mySpecsList = [];
            
            if (userSpec?.education) {
                mySpecsList.push(`${userSpec.education.school} ${userSpec.education.major} (${userSpec.education.gpa})`);
            }
            
            userSpec?.languages?.forEach(lang => {
                mySpecsList.push(`${lang.type} ${lang.score}ì `);
            });
            
            userSpec?.certificates?.forEach(cert => {
                mySpecsList.push(cert.name);
            });
            
            userSpec?.projects?.forEach(proj => {
                mySpecsList.push(`í”„ë¡œì íŠ¸: ${proj.name}`);
            });

            mySpecs.innerHTML = mySpecsList.length > 0 
                ? mySpecsList.map(spec => `
                    <div class="comparison-item match">
                        <span class="status-icon">âœ…</span>
                        ${spec}
                    </div>
                `).join('')
                : '<div class="empty-state"><p>ë“±ë¡ëœ ìŠ¤í™ì´ ì—†ìŠµë‹ˆë‹¤</p></div>';

            // ì¶”ì²œ ì—…ë¬´ ìƒì„±
            generateTasks(job);
        }

        function checkRequirement(requirement) {
            const req = requirement.toLowerCase();
            
            // ê°„ë‹¨í•œ ë§¤ì¹­ ë¡œì§ (ì‹¤ì œë¡œëŠ” ë” ì •êµí•œ ë¶„ì„ í•„ìš”)
            if (req.includes('toeic')) {
                const hasLanguage = userSpec?.languages?.some(l => l.type.toLowerCase().includes('toeic'));
                return hasLanguage 
                    ? { class: 'match', icon: 'âœ…' }
                    : { class: 'missing', icon: 'âŒ' };
            }
            
            if (req.includes('ìê²©ì¦') || req.includes('ì •ë³´ì²˜ë¦¬ê¸°ì‚¬') || req.includes('gaiq')) {
                const hasCert = userSpec?.certificates?.length > 0;
                return hasCert
                    ? { class: 'partial', icon: 'âš ï¸' }
                    : { class: 'missing', icon: 'âŒ' };
            }
            
            if (req.includes('í”„ë¡œì íŠ¸') || req.includes('ê²½í—˜')) {
                const hasProject = userSpec?.projects?.length > 0;
                return hasProject
                    ? { class: 'match', icon: 'âœ…' }
                    : { class: 'missing', icon: 'âŒ' };
            }
            
            return { class: 'partial', icon: 'âš ï¸' };
        }

        function generateTasks(job) {
            const tasks = [
                {
                    title: 'ì´ë ¥ì„œ ë° í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸',
                    description: 'ìµœì‹  í”„ë¡œì íŠ¸ì™€ ê²½í—˜ì„ ë°˜ì˜í•˜ì—¬ ì´ë ¥ì„œ ìˆ˜ì •',
                    priority: 'high'
                },
                {
                    title: 'ê¸°ìˆ  ì—­ëŸ‰ ê°•í™”',
                    description: job.requirements[0] + ' ê´€ë ¨ í•™ìŠµ ë° ì‹¤ìŠµ',
                    priority: 'high'
                },
                {
                    title: 'ìê²©ì¦ ì·¨ë“',
                    description: 'í•„ìš” ìê²©ì¦ í•™ìŠµ ë° ì‹œí—˜ ì¤€ë¹„',
                    priority: 'medium'
                },
                {
                    title: 'í”„ë¡œì íŠ¸ ê²½í—˜ ìŒ“ê¸°',
                    description: 'í¬íŠ¸í´ë¦¬ì˜¤ì— ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ê°œì¸ í”„ë¡œì íŠ¸ ì§„í–‰',
                    priority: 'medium'
                },
                {
                    title: 'ì–´í•™ ì ìˆ˜ í–¥ìƒ',
                    description: 'ëª©í‘œ ì ìˆ˜ ë‹¬ì„±ì„ ìœ„í•œ í•™ìŠµ ê³„íš ìˆ˜ë¦½ ë° ì‹¤í–‰',
                    priority: 'low'
                }
            ];

            const taskList = document.getElementById('taskList');
            taskList.innerHTML = tasks.map(task => `
                <div class="task-card">
                    <div class="task-info">
                        <div class="task-title">${task.title}</div>
                        <div class="task-description">${task.description}</div>
                    </div>
                    <div class="task-priority priority-${task.priority}">
                        ${task.priority === 'high' ? 'ë†’ìŒ' : task.priority === 'medium' ? 'ë³´í†µ' : 'ë‚®ìŒ'}
                    </div>
                </div>
            `).join('');
        }

        function confirmGoal() {
            if (!selectedJob) {
                alert('ë¨¼ì € ì±„ìš© ê³µê³ ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // ëª©í‘œ ì €ì¥
            const goalData = {
                job: selectedJob,
                setDate: new Date().toISOString(),
                tasks: [
                    { id: 1, title: 'ì´ë ¥ì„œ ë° í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸', completed: false, dueDate: '2025-11-01' },
                    { id: 2, title: 'ê¸°ìˆ  ì—­ëŸ‰ ê°•í™”', completed: false, dueDate: '2025-11-10' },
                    { id: 3, title: 'ìê²©ì¦ ì·¨ë“', completed: false, dueDate: '2025-11-15' },
                    { id: 4, title: 'í”„ë¡œì íŠ¸ ê²½í—˜ ìŒ“ê¸°', completed: false, dueDate: '2025-11-20' },
                    { id: 5, title: 'ì–´í•™ ì ìˆ˜ í–¥ìƒ', completed: false, dueDate: '2025-11-25' }
                ]
            };

            StorageManager.saveGoal(goalData);
            StorageManager.saveTasks(goalData.tasks);

            alert('ëª©í‘œê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤! ë¡œë“œë§µ í˜ì´ì§€ì—ì„œ ì§„í–‰ ìƒí™©ì„ ê´€ë¦¬í•˜ì„¸ìš”.');
            window.location.href = 'roadmap.html';
        }
    </script>
</body>
</html>
